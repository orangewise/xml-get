#!/usr/bin/env node

const d = require('debug')('bin')
const args = process.argv.slice(2)
const xmlGet = require('../.')
const getStdin = require('get-stdin')

// process arguments
const path = args[0]
let xml

;(async () => {
  // get xml, from file or stdin
  if (process.stdin.isTTY) {
    xml = args[1]
  } else {
    xml = await getStdin()
  }  
  d({ xml })

  if (!path || !xml) {
    xmlGet.usage()
    process.exit(1)
  }
  
  console.log(xmlGet.value(path, xml))

})()
